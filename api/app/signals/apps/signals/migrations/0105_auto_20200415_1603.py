# Generated by Django 2.2.12 on 2020-04-15 14:03

import django.contrib.gis.db.models.fields
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('signals', '0104_auto_20200410_1001'),
    ]

    operations = [
        migrations.CreateModel(
            name='Area',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(max_length=255)),
            ],
        ),
        migrations.CreateModel(
            name='AreaType',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255)),
                ('code', models.CharField(max_length=255)),
                ('description', models.TextField(max_length=3000)),
            ],
        ),
        migrations.AlterModelOptions(
            name='category',
            options={'ordering': ('name',), 'permissions': (('sia_can_view_all_categories', 'Bekijk all categorieën (overschrijft categorie rechten van afdeling)'), ('sia_category_read', 'Inzien van categorieën'), ('sia_category_write', 'Wijzigen van categorieën')), 'verbose_name_plural': 'Categories'},
        ),
        migrations.AlterModelOptions(
            name='department',
            options={'ordering': ('name',), 'permissions': (('sia_department_read', 'Inzien van afdeling instellingen'), ('sia_department_write', 'Wijzigen van afdeling instellingen'))},
        ),
        migrations.AlterModelOptions(
            name='signal',
            options={'ordering': ('created_at',), 'permissions': (('sia_read', 'Leesrechten algemeen'), ('sia_write', 'Schrijfrechten algemeen'), ('sia_split', 'Splitsen van een melding'), ('sia_signal_create_initial', 'Melding aanmaken'), ('sia_signal_create_note', 'Notitie toevoegen bij een melding'), ('sia_signal_change_status', 'Wijzigen van status van een melding'), ('sia_signal_change_category', 'Wijzigen van categorie van een melding'), ('sia_signal_export', 'Meldingen exporteren'), ('sia_signal_report', 'Rapportage beheren'))},
        ),
        migrations.AlterModelOptions(
            name='status',
            options={'get_latest_by': 'datetime', 'ordering': ('created_at',), 'permissions': (('push_to_sigmax', 'Doorsturen van een melding (THOR)'),), 'verbose_name_plural': 'Statuses'},
        ),
        migrations.AlterModelOptions(
            name='statusmessagetemplate',
            options={'ordering': ('category', 'state', 'order'), 'permissions': (('sia_statusmessagetemplate_write', 'Wijzingen van standaardteksten'),), 'verbose_name': 'Standaard afmeldtekst', 'verbose_name_plural': 'Standaard afmeldteksten'},
        ),
        migrations.AlterField(
            model_name='category',
            name='departments',
            field=models.ManyToManyField(through='signals.CategoryDepartment', to='signals.Department'),
        ),
        migrations.AlterField(
            model_name='servicelevelobjective',
            name='category',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='slo', to='signals.Category'),
        ),
        migrations.AlterField(
            model_name='signal',
            name='source',
            field=models.CharField(default='online', max_length=128),
        ),
        migrations.AlterField(
            model_name='status',
            name='state',
            field=models.CharField(blank=True, choices=[('m', 'Gemeld'), ('i', 'In afwachting van behandeling'), ('b', 'In behandeling'), ('h', 'On hold'), ('ingepland', 'Ingepland'), ('ready to send', 'Te verzenden naar extern systeem'), ('o', 'Afgehandeld'), ('a', 'Geannuleerd'), ('reopened', 'Heropend'), ('s', 'Gesplitst'), ('closure requested', 'Verzoek tot afhandeling'), ('sent', 'Verzonden naar extern systeem'), ('send failed', 'Verzending naar extern systeem mislukt'), ('done external', 'Melding is afgehandeld in extern systeem'), ('reopen requested', 'Verzoek tot heropenen')], default='m', help_text='Melding status', max_length=20),
        ),
        migrations.AlterField(
            model_name='statusmessagetemplate',
            name='category',
            field=models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, related_name='status_message_templates', to='signals.Category'),
        ),
        migrations.AlterField(
            model_name='statusmessagetemplate',
            name='state',
            field=models.CharField(choices=[('m', 'Gemeld'), ('i', 'In afwachting van behandeling'), ('b', 'In behandeling'), ('h', 'On hold'), ('ingepland', 'Ingepland'), ('ready to send', 'Te verzenden naar extern systeem'), ('o', 'Afgehandeld'), ('a', 'Geannuleerd'), ('reopened', 'Heropend'), ('s', 'Gesplitst'), ('closure requested', 'Verzoek tot afhandeling'), ('sent', 'Verzonden naar extern systeem'), ('send failed', 'Verzending naar extern systeem mislukt'), ('done external', 'Melding is afgehandeld in extern systeem'), ('reopen requested', 'Verzoek tot heropenen')], max_length=20),
        ),
        migrations.AlterField(
            model_name='type',
            name='created_by',
            field=models.EmailField(blank=True, max_length=254, null=True),
        ),
        migrations.CreateModel(
            name='AreaProperties',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255)),
                ('geometry', django.contrib.gis.db.models.fields.MultiPolygonField(srid=4326)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('created_by', models.EmailField(blank=True, max_length=254, null=True)),
                ('area', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='properties', to='signals.Area')),
            ],
        ),
        migrations.AddField(
            model_name='area',
            name='type',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='signals.AreaType'),
        ),
        migrations.AlterUniqueTogether(
            name='area',
            unique_together={('code', 'type')},
        ),
    ]
